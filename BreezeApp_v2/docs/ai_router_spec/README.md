> **Note:** This document is the detailed technical specification for the internal architecture of the **AI Router module**. For the overall project roadmap, cross-app architecture, and milestone definitions, please refer to the primary [**BreezeApp Refactoring Plan**](./refactoring_plan.md).

# ğŸš€ AI Router è¨­è¨ˆæ–‡ä»¶

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¦½

AI Router æ˜¯ BreezeApp çš„æ ¸å¿ƒæ¨¡çµ„ï¼Œè² è²¬æ©‹æ¥ UI å±¤èˆ‡å¤šç¨® AI èƒ½åŠ›ï¼ˆLLMã€VLMã€ASRã€TTSã€Guardian ç­‰ï¼‰ï¼Œæä¾›çµ±ä¸€ã€å¯æ“´å±•çš„æ¨è«–æœå‹™æ¶æ§‹ã€‚

### ğŸ¯ æ ¸å¿ƒç›®æ¨™
- **å¼·å¥å°è£**ï¼šæä¾›ç©©å®šå¯é çš„ AI æœå‹™æŠ½è±¡å±¤
- **å¯æ’æ‹”æ¶æ§‹**ï¼šæ”¯æ´å‹•æ…‹ Runner å’Œæ¨¡å‹æ“´å±•
- **æ™ºèƒ½ç®¡ç†**ï¼šè‡ªå‹•åŒ–æ¨¡å‹ç”Ÿå‘½é€±æœŸèˆ‡è³‡æºç®¡ç†
- **Clean Architecture**ï¼šéµå¾ª SOLID åŸå‰‡çš„åˆ†å±¤è¨­è¨ˆ
- **é«˜å¯ç”¨æ€§**ï¼šå…§å»ºéŒ¯èª¤è™•ç†èˆ‡é™ç´šæ©Ÿåˆ¶

## ğŸ“š æ–‡ä»¶å°èˆª

### ğŸ” å¿«é€Ÿé–‹å§‹
æ–°æ‰‹å»ºè­°æŒ‰ä»¥ä¸‹é †åºé–±è®€ï¼š

1. [å°ˆæ¡ˆç¸½è¦½](./00-Overview/project-overview.md) - äº†è§£æ•´é«”æ¦‚å¿µ
2. [æ¶æ§‹åœ–è¡¨](./00-Overview/architecture-diagram.md) - è¦–è¦ºåŒ–ç³»çµ±è¨­è¨ˆ
3. [æ¨¡çµ„ä¾è³´](./00-Overview/module-dependencies.md) - ç†è§£çµ„ä»¶é—œä¿‚
4. [Androidçµæ§‹](./01-Architecture/android-structure.md) - å¯¦éš›å°ˆæ¡ˆçµ„ç¹”

### ğŸ“‚ æ–‡ä»¶åˆ†é¡

#### ğŸ” [00-Overview](./00-Overview/) - æ¶æ§‹ç¸½è¦½
- å°ˆæ¡ˆæ¦‚è¿°èˆ‡æ ¸å¿ƒæ¦‚å¿µ
- ç³»çµ±æ¶æ§‹è¦–è¦ºåŒ–
- æ¨¡çµ„é–“ä¾è³´é—œä¿‚

#### ğŸ›ï¸ [01-Architecture](./01-Architecture/) - æ¶æ§‹è¨­è¨ˆ
- æ ¸å¿ƒçµ„ä»¶è¨­è¨ˆåŸå‰‡
- è³‡æ–™æµç¨‹èˆ‡ç‹€æ…‹ç®¡ç†
- åŸ·è¡Œç·’æ¨¡å‹èˆ‡ä¸¦ç™¼ç­–ç•¥
- Android å°ˆæ¡ˆçµæ§‹è¦åŠƒ

#### ğŸ”Œ [02-Interfaces](./02-Interfaces/) - ä»‹é¢è¦ç¯„
- Runner çµ±ä¸€ä»‹é¢å®šç¾©
- èƒ½åŠ›èˆ‡ Runner å°æ‡‰è¡¨
- å„ Runner è©³ç´°è¦æ ¼

#### ğŸ“¦ [03-Models](./03-Models/) - æ¨¡å‹ç®¡ç†
- æ¨¡å‹é…ç½®è¦ç¯„èˆ‡æ ¼å¼
- æ¨¡å‹å…±ç”¨ç­–ç•¥è¨­è¨ˆ
- æ¨¡å‹ç”Ÿå‘½é€±æœŸç®¡ç†

#### ğŸš€ [04-Runtime](./04-Runtime/) - åŸ·è¡Œæ™‚è¨­è¨ˆ
- æ´¾ç™¼å™¨å·¥ä½œæµç¨‹
- æ¨è«–åŸ·è¡Œæµç¨‹
- ç³»çµ±è³‡æºç®¡ç†ç­–ç•¥

#### ğŸ›¡ï¸ [05-Error-Handling](./05-Error-Handling/) - éŒ¯èª¤è™•ç†
- çµ±ä¸€éŒ¯èª¤ç¢¼å®šç¾©
- é™ç´šç­–ç•¥èˆ‡ Fallback
- éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶

#### ğŸ§ª [06-Testing](./06-Testing/) - æ¸¬è©¦ç­–ç•¥
- å®Œæ•´æ¸¬è©¦çŸ©é™£
- å–®å…ƒæ¸¬è©¦æŒ‡å—
- æ•´åˆæ¸¬è©¦è¨ˆç•«

#### ğŸ“ [07-Implementation](./07-Implementation/) - å¯¦ä½œæŒ‡å—
- é–‹ç™¼è¦ç¯„èˆ‡æœ€ä½³å¯¦å‹™
- ç¨‹å¼ç¢¼é¢¨æ ¼æ¨™æº–
- éƒ¨ç½²èˆ‡ç¶­è­·æŒ‡å—

#### ğŸ“Š [08-Diagrams](./08-Diagrams/) - åœ–è¡¨è³‡æº
- Mermaid åŸå§‹ç¢¼ç®¡ç†
- åŒ¯å‡ºåœ–ç‰‡è³‡æº

## ï¿½ï¿½ ä¸åŒè§’è‰²çš„é–±è®€å»ºè­°

### ğŸ‘¨â€ğŸ’» **é–‹ç™¼å·¥ç¨‹å¸«**
```
README.md â†’ 00-Overview â†’ 02-Interfaces â†’ 03-Models â†’ 07-Implementation
```

### ğŸ—ï¸ **ç³»çµ±æ¶æ§‹å¸«**
```
README.md â†’ 00-Overview â†’ 01-Architecture â†’ 04-Runtime â†’ 05-Error-Handling
```

### ğŸ§ª **æ¸¬è©¦å·¥ç¨‹å¸«**
```
README.md â†’ 00-Overview â†’ 06-Testing â†’ 05-Error-Handling â†’ 02-Interfaces
```

### ğŸ“± **ç”¢å“ç¶“ç†**
```
README.md â†’ 00-Overview â†’ ç°¡è¦ç€è¦½å„ç« ç¯€çš„ç›®æ¨™èˆ‡ç¯„åœéƒ¨åˆ†
```

## ğŸ› ï¸ æŠ€è¡“å †ç–Š

- **èªè¨€**: Kotlin, JNI/C++
- **å¹³å°**: Android (API 24+)
- **æ¶æ§‹**: Clean Architecture, MVVM
- **ä¸¦ç™¼**: Kotlin Coroutines
- **æ¨è«–å¼•æ“**: ONNX Runtime, PyTorch Mobile, MediaPipe
- **åœ–è¡¨**: Mermaid

## ğŸ“ˆ å°ˆæ¡ˆç‹€æ…‹

| çµ„ä»¶ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ | âœ… å®Œæˆ | æ ¸å¿ƒæ¶æ§‹å·²å®šç¾© |
| ğŸ”Œ ä»‹é¢è¦ç¯„ | âœ… å®Œæˆ | Runnerä»‹é¢å·²æ¨™æº–åŒ– |
| ğŸ“¦ æ¨¡å‹ç®¡ç† | âœ… å®Œæˆ | é…ç½®è¦ç¯„å·²å»ºç«‹ |
| ğŸ›¡ï¸ éŒ¯èª¤è™•ç† | âœ… å®Œæˆ | éŒ¯èª¤ç¢¼èˆ‡ç­–ç•¥å·²å®šç¾© |
| ğŸ§ª æ¸¬è©¦ç­–ç•¥ | âœ… å®Œæˆ | æ¸¬è©¦çŸ©é™£å·²å»ºç«‹ |
| ğŸ’» ç¨‹å¼ç¢¼å¯¦ä½œ | ğŸ”„ é€²è¡Œä¸­ | ä¾æ“šè¨­è¨ˆæ–‡ä»¶å¯¦ä½œä¸­ |

## ğŸ¤ è²¢ç»æŒ‡å—

1. é–±è®€ç›¸é—œè¨­è¨ˆæ–‡ä»¶
2. éµå¾ª [é–‹ç™¼è¦ç¯„](./07-Implementation/development-guidelines.md)
3. åŸ·è¡Œç›¸æ‡‰æ¸¬è©¦
4. æ›´æ–°ç›¸é—œæ–‡ä»¶

## ğŸ“ è¯çµ¡è³‡è¨Š

å¦‚æœ‰ç–‘å•æˆ–å»ºè­°ï¼Œè«‹ï¼š
- æäº¤ Issue è¨è«–è¨­è¨ˆç›¸é—œå•é¡Œ
- åƒè€ƒ [Implementation Guide](./07-Implementation/) äº†è§£å¯¦ä½œè©³æƒ…
- æŸ¥çœ‹ [Testing Matrix](./06-Testing/test-matrix.md) äº†è§£é©—è­‰æ¨™æº–

---

**ğŸ¯ æœ€å¾Œæ›´æ–°**: 2025-01
**ğŸ“„ æ–‡ä»¶ç‰ˆæœ¬**: v2.0
**ğŸ‘¥ ç¶­è­·åœ˜éšŠ**: BreezeApp AI Router Team 